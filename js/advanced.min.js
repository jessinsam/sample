"use strict";!function(t){!function(){var e=t("body"),n=t(".js-whizzy-gallery.lightpopup"),o=t(".js-whizzy-gallery:not(.lightpopup)"),i=null;n.on("onAfterOpen.lg",(function(){t(".lg-toolbar").append('<span class="whizzy-open-photo-comments lg-icon fa fa-comments"></span>')})),n.on("onBeforeSlide.lg",(function(t,e,o){i=n.find(".js-proof-photo").eq(o).data("attachment_id")})),o.on("mfpOpen",(function(){t(".mfp-figure").prepend('<button type="button" class="whizzy-open-photo-comments magnific"><i class="fa fa-comments"></i></button>')})),o.on("mfpChange",(function(){var e=t.magnificPopup.instance.currItem.index;i=o.find(".js-proof-photo").eq(e).data("attachment_id")})),e.on("click",".whizzy-open-photo-comments",(function(){a()})),e.on("click",".whizzy-popup-close",(function(){t(".whizzy-popup-wrapper").addClass("hidden"),t(".whiizy-pro--comments-list-container").empty(),t("body").css("overflow","")})),e.on("submit","#whizzy-photo-comments-form",(function(e){e.preventDefault();var n=t(this),o=n.find("button"),s=o.text(),l=new FormData(n[0]);l.append("attachment_id",i),t.ajax({url:whizzy.ajaxurl,method:"post",data:l,processData:!1,contentType:!1,beforeSend:function(){n.find(".errors-list").html("").addClass("hidden"),o.html('<div class="whizzy-load-speeding-wheel button"></div>')},success:function(t){!0===t.status?(a(),n.find('input[type="text"], input[type="email"], textarea').val("")):n.find(".errors-list").html(t.msg).removeClass("hidden")},complete:function(){o.html(s)}})}));var a=function(){t.ajax({url:whizzy.ajaxurl,method:"get",data:{action:"whizzy-get-photo-comments",attachment_id:i},beforeSend:function(){t("#whizzy-pro--loader").removeClass("hidden")},success:function(e){t(".whiizy-pro--comments-list-container").html(e),t(".popup-scroll").animate({scrollTop:0},"slow")},complete:function(){t("body").css("overflow","hidden"),t("#whizzy-pro--loader").addClass("hidden"),t(".whizzy-popup-wrapper").removeClass("hidden")}})}}(),t(".whizzy-pro--approve-gallery").on("click",(function(e){e.preventDefault();var n=t(this),o=n.html();t.ajax({url:whizzy.ajaxurl,method:"post",data:{action:"whizzy-approve-galley",gallery_id:n.data("id"),nonce:n.data("nonce")},beforeSend:function(){n.html('<div class="whizzy-load-speeding-wheel button small"></div>')},success:function(t){n.html(o),n.find("em").addClass("hidden"),!0===t?(n.attr("disabled","disabled"),n.find("em").last().removeClass("hidden")):n.find("em").first().removeClass("hidden")}})})),t("#whizzy-pro--login").on("submit",(function(e){e.preventDefault();var n=t(this),o=n.find("button"),i=o.text(),a=new FormData(n[0]);t.ajax({url:whizzy.ajaxurl,method:"post",data:a,processData:!1,contentType:!1,beforeSend:function(){o.html('<div class="whizzy-load-speeding-wheel button black"></div>'),n.find(".errors-list").html("").addClass("hidden")},success:function(t){!0===t.status?window.location.href=t.redirect_to:n.find(".errors-list").html(t.msg).removeClass("hidden")},complete:function(){o.html(i)}})}))}(jQuery);